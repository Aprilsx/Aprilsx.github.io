{"title":"Java中main函数","slug":"sprouting180315","date":"2018-03-15T09:58:29.000Z","updated":"2018-03-25T03:49:45.000Z","comments":true,"path":"api/articles/sprouting180315.json","photos":[],"link":"","excerpt":"❤  上手第一个Java程序，照着课本例子抄的，全程手写，结果终了执行的时候出了问题。<br>下面是我写的错误代码：  1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>package com.trainning.aprilsx;<br>/**<br> * @author april<br> *<br> */<br>public class Welcome &#123;<br>    public static void main()<br>    &#123;<br>        String greeting = \"Welcom to Core Java!\";<br>        System.out.println(greeting);<br>        for (int i = 0; i &lt; greeting.length(); i++)<br>            System.out.print(\"=\");<br>        System.out.println();<br>    &#125;<br>&#125;<br>","covers":["/images/sprouting180319_1.png"],"content":"<p style=\"text-align: center;\">❤</p>  \n\n<p>上手第一个Java程序，照着课本例子抄的，全程手写，结果终了执行的时候出了问题。<br></p>\n<ul>\n<li>下面是我写的错误代码：  <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.trainning.aprilsx;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> april</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Welcome</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        String greeting = <span class=\"string\">\"Welcom to Core Java!\"</span>;</span><br><span class=\"line\">        System.out.println(greeting);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; greeting.length(); i++)</span><br><span class=\"line\">            System.out.print(<span class=\"string\">\"=\"</span>);</span><br><span class=\"line\">        System.out.println();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<a id=\"more\"></a>\n<p>原来<strong>main()</strong>这里少了参数，正确的写法应该是<strong>main(String[] args)</strong></p>\n<ul>\n<li>正确代码：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.trainning.aprilsx;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> april</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Welcome</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        String greeting = <span class=\"string\">\"Welcom to Core Java!\"</span>;</span><br><span class=\"line\">        System.out.println(greeting);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; greeting.length(); i++)</span><br><span class=\"line\">            System.out.print(<span class=\"string\">\"=\"</span>);</span><br><span class=\"line\">        System.out.println();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>为什么main（）函数的写法是<code>public static void main(String[] args)</code>呢？  </p>\n<ul>\n<li>暴力解答：<br>就这么规定的！什么都得有个规则不是。固定搭配，这样才能被jvm识别调用（<a href=\"https://baike.baidu.com/item/java%E8%99%9A%E6%8B%9F%E6%9C%BA/6810577?fr=aladdin\" target=\"_blank\" rel=\"noopener\">jvm是什么？</a>）<br><b><br>  所以每个java程序都必须有一个main方法，其格式如下  <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ClassName</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        program statments</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</b></li>\n</ul>\n<p></p>\n<ul>\n<li><p>理论分析：<br><strong>#关键字分析</strong><br>首先我们需要了解Java的<a href=\"https://www.w3cschool.cn/java/java-modifier-types.html\" target=\"_blank\" rel=\"noopener\">修饰符</a>有哪些。下面罗列了几个必须知道的  </p>\n<ol>\n<li>（访问修饰符）default 默认的就是这个。用该修饰符修饰的变量、方法、类或者构造函数，只能在它所在包内使用（<a href=\"https://www.w3cschool.cn/java/java-package.html\" target=\"_blank\" rel=\"noopener\">什么是包？</a>）</li>\n<li>（访问修饰符）private <code>（针对类而言，类内）</code>私有的。用该修饰符修饰的，其范围更小，仅能在当前的class类中使用，而且不能被继承·不能被继承·不能被继承（<a href=\"https://www.w3cschool.cn/java/java-object-classes.html\" target=\"_blank\" rel=\"noopener\">什么是类？</a>）</li>\n<li>（访问修饰符）pulic <code>（针对包而言，包内）</code>共有的。对所有类可见，可以说是全局的了，范围最大。</li>\n<li>（访问修饰符）protected <code>（针对包而言）</code>受保护的。对同一包内类和所有子类可见。相当于上了个锁子，你锁了，别的包也就懂了。 </li>\n<li>（非访问修饰符）static 静态的，静态域被也被称为类域。全局概念的，意味着你声明的是只此一份的东西，指针永远指在这里，<a href=\"http://blog.csdn.net/liuqiaoyu080512/article/details/8455707\" target=\"_blank\" rel=\"noopener\">进一步了解</a>。理解深拷贝和浅拷贝，会对它有更深的理解。（<a href=\"https://www.cnblogs.com/always-chang/p/6107437.html\" target=\"_blank\" rel=\"noopener\">什么是深拷贝和浅拷贝？</a>）</li>\n<li>（其他）void 空数据类型；main 一个英文单词，被特别的用在这里。String[] 声明一个字符串数组用。args 单词Arguments的缩写，你可以随意改，也是被特别的用在这里。  </li>\n</ol>\n<p>所以main()函数是一个名字为main的；无返回值的；全局共有的；静态唯一的；带有字符串数组参数的特殊函数。</p>\n<p><strong>#调用过程分析（有待总结）</strong><br>main函数的终极秘密是与jvm紧密相关的，<code>运行已编译的程序时，Java虚拟机将从指定类中的main方法开始执行，因此为了代码能够执行，在类的源文件中必须包含一个main方法</code>。</p>\n<p>现在总结不出真正原因，这里先列出main函数参数的传递过程。<br><img src=\"/images/sprouting180319_1.png\" alt=\"\"><br>可以看到，我们是可以向main函数中传递参数的。我们知道，我们在编程时，所有的线程终归都在main函数中生死轮回，main函数就是最大的官。但是，现在还有比main更高的东西在支配它，并且掌管它的生死。  <br><br><b>那么问题来了，谁才是main函数背后的操控者呢？（我觉得应该是进程相关的东西，等我了解完进程是如何诞生和灭亡之后，再回来补充吧！）</b><br><hr style=\"border: 0;height: 1px;background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0)) \"><br>看完这段代码，我终于对main有了更深的解读。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Message</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(args.length == <span class=\"number\">0</span> || args[<span class=\"number\">0</span>].equals(<span class=\"string\">\"-h\"</span>))</span><br><span class=\"line\">            System.out.print(<span class=\"string\">\"Hello,\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(args[<span class=\"number\">0</span>].equals(<span class=\"string\">\"-g\"</span>))</span><br><span class=\"line\">            System.out.print(<span class=\"string\">\"Goodbye,\"</span>);</span><br><span class=\"line\">        <span class=\"comment\">// print the other command-line arguments</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt; args.length; i++)</span><br><span class=\"line\">            System.out.print(<span class=\"string\">\"\"</span> + args[i]);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"!\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>我们知道，Java程序在运行时，.java文件会被编译成.class文件，而当我们通过jvm调用.class文件时，便可对该类进行传参。这也就是说，编译好的类文件虽然被封装成为一个黑匣子，但仍然保留了一个接口，让它能够共享其权限以外的资源，从而实现文件与文件之间的控制，或是某种联系！<br>下面是上述代码编译完成后，对.class文件的调用<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java Message -g cruel world</span><br><span class=\"line\"></span><br><span class=\"line\">// main函数中args将接受到</span><br><span class=\"line\">// args[0]: \"-g\"</span><br><span class=\"line\">// arg[1]: \"cruel\"</span><br><span class=\"line\">// arg[2]: \"world\"</span><br><span class=\"line\"></span><br><span class=\"line\">// 最后打印结果是：\"Goodbye,cruel world!\"</span><br></pre></td></tr></table></figure></p>\n<p><b>到这里，main函数的秘密终于可以告一段落了！相信随着对jvm的进一步了解，main的更多秘密会被一点一点发现</b><br><br></p>\n<blockquote>\n<p>  参考文献：<br>  [ 1 ]   <a href=\"http://blog.csdn.net/lxjstudyIT/article/details/51907625\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/lxjstudyIT/article/details/51907625</a><br>  [ 2 ]   <a href=\"http://blog.csdn.net/qiaoquan3/article/details/53325915\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/qiaoquan3/article/details/53325915</a><br>  [ 3 ]   <a href=\"https://jingyan.baidu.com/album/6525d4b1605662ac7d2e94c8.html?picindex=1\" target=\"_blank\" rel=\"noopener\">https://jingyan.baidu.com/album/6525d4b1605662ac7d2e94c8.html?picindex=1</a><br>  [ 4 ]   Java核心技术I-p82</p>\n</blockquote>\n<p>🍀From Clover <a href=\"https://aprilsx.github.io/2018/03/15/sprouting180315/\">https://aprilsx.github.io/2018/03/15/sprouting180315/</a> </p>\n","categories":[],"tags":[{"name":"sprouting","slug":"sprouting","count":4,"path":"api/tags/sprouting.json"}]}