{"title":"Java.åå°„","slug":"sprouting180413b","date":"2018-04-13T05:53:16.000Z","updated":"2018-04-13T08:50:39.000Z","comments":true,"path":"api/articles/sprouting180413b.json","photos":[],"link":"","excerpt":null,"covers":null,"content":"<p></p><p style=\"text-align: center;\">â¤</p><br><br><p></p>\n<h3 id=\"ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ</h3><blockquote>\n<p>èƒ½å¤Ÿåˆ†æç±»èƒ½åŠ›çš„ç¨‹åºç§°ä¸ºåå°„ï¼ˆreflectionï¼‰ã€‚åå°„åº“æä¾›äº†ä¸€ä¸ªéå¸¸ä¸°å¯Œä¸”ç²¾å¿ƒè®¾è®¡çš„å·¥å…·ç±»ï¼Œä»¥ä¾¿ç¼–å†™èƒ½å¤ŸåŠ¨æ€æ“çºµJavaä»£ç çš„ç¨‹åºã€‚ç‰¹åˆ«æ˜¯åœ¨è®¾è®¡æˆ–è¿è¡Œä¸­æ·»åŠ æ–°ç±»æ—¶ï¼Œèƒ½å¤Ÿå¿«é€Ÿåœ°åº”ç”¨å¼€å‘å·¥å…·åŠ¨æ€åœ°æŸ¥è¯¢æ–°æ·»åŠ ç±»çš„èƒ½åŠ›ã€‚</p>\n</blockquote>\n<p><br></p>\n<h3 id=\"åå°„æœºåˆ¶å¯ä»¥ç”¨æ¥åšä»€ä¹ˆï¼Ÿ\"><a href=\"#åå°„æœºåˆ¶å¯ä»¥ç”¨æ¥åšä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"åå°„æœºåˆ¶å¯ä»¥ç”¨æ¥åšä»€ä¹ˆï¼Ÿ\"></a>åå°„æœºåˆ¶å¯ä»¥ç”¨æ¥åšä»€ä¹ˆï¼Ÿ</h3><ul>\n<li>åå°„æ˜¯ä¸€ç§åŠŸèƒ½å¼ºå¤§ä¸”å¤æ‚çš„æœºåˆ¶ï¼Œä½¿ç”¨å®ƒçš„ä¸»è¦äººå‘˜æ˜¯å·¥å…·æ„é€ è€…ï¼Œè€Œä¸æ˜¯åº”ç”¨ç¨‹åºå‘˜ã€‚<ul>\n<li>åœ¨è¿è¡Œæ—¶åˆ†æç±»</li>\n<li>åœ¨è¿è¡Œæ—¶æŸ¥çœ‹å¯¹è±¡</li>\n<li>å®ç°é€šç”¨çš„æ•°ç»„æ“ä½œä»£ç </li>\n<li>åˆ©ç”¨Methodå¯¹è±¡</li>\n</ul>\n</li>\n</ul>\n<p><br></p>\n<h3 id=\"Classç±»\"><a href=\"#Classç±»\" class=\"headerlink\" title=\"Classç±»\"></a>Classç±»</h3><blockquote>\n<p>åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼ŒJavaè¿è¡Œæ—¶ç³»ç»Ÿæ—¶é’Ÿä¸ºæ‰€æœ‰çš„å¯¹è±¡ç»´æŠ¤ä¸€ä¸ªè¢«ç§°ä¸º<b>è¿è¡Œæ—¶</b>çš„ç±»å‹æ ‡è¯†ã€‚è¿™ä¸ªä¿¡æ¯è·Ÿè¸ªç€æ¯ä¸ªå¯¹è±¡æ‰€å±çš„ç±»ã€‚è™šæ‹Ÿæœºåˆ©ç”¨è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯é€‰æ‹©ç›¸åº”çš„æ–¹æ³•æ‰§è¡Œï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥é€šè¿‡ä¸“é—¨çš„Javaç±»æ¥è®¿é—®ï¼Œè€Œä¿å­˜è¿™äº›ä¿¡æ¯çš„ç±»å°±æ˜¯Classã€‚</p>\n</blockquote>\n<figure class=\"highlight sqf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Classå¯¹è±¡æ–¹æ³•æµ‹è¯•</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">String <span class=\"built_in\">str</span> = new String();</span><br><span class=\"line\"></span><br><span class=\"line\">Class <span class=\"built_in\">className</span> = <span class=\"built_in\">str</span>.getClass();</span><br><span class=\"line\">System.out.println(<span class=\"built_in\">className</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(<span class=\"built_in\">className</span>.getName());</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(<span class=\"built_in\">className</span>.getSuperclass());</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(Arrays.<span class=\"built_in\">toString</span>(<span class=\"built_in\">className</span>.getDeclaredMethods()));</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(Arrays.<span class=\"built_in\">toString</span>(<span class=\"built_in\">className</span>.getDeclaredClasses()));</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(<span class=\"built_in\">className</span>.getModifiers());</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(<span class=\"built_in\">className</span>.getName());</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(Arrays.<span class=\"built_in\">toString</span>(<span class=\"built_in\">className</span>.getTypeParameters()));</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(<span class=\"built_in\">className</span>.getTypeName());</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h3 id=\"åˆ©ç”¨åå°„æç‚¹äº‹å„¿\"><a href=\"#åˆ©ç”¨åå°„æç‚¹äº‹å„¿\" class=\"headerlink\" title=\"åˆ©ç”¨åå°„æç‚¹äº‹å„¿\"></a>åˆ©ç”¨åå°„æç‚¹äº‹å„¿</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿™ä¸ªä¾‹å­åˆ©ç”¨åå°„å®ç°äº†æ³›å‹æ•°ç»„çš„æ‹·è´ï¼Œå¾ˆå¥½çš„ä¾‹å­ï¼</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Object <span class=\"title\">goodCopyOf</span><span class=\"params\">(Object a, <span class=\"keyword\">int</span> newLength)</span> </span>&#123;</span><br><span class=\"line\">    Class acl = a.getClass();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!acl.isArray()) <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    Class componetType = acl.getComponentType();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> length = Array.getLength(a);</span><br><span class=\"line\">    Object newArray = Array.newInstance(componetType, newLength);</span><br><span class=\"line\">    System.arraycopy(a, <span class=\"number\">0</span>, newArray, <span class=\"number\">0</span>, Math.min(length, newLength));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> newArray;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h3 id=\"è°ƒç”¨ä»»æ„æ–¹æ³•\"><a href=\"#è°ƒç”¨ä»»æ„æ–¹æ³•\" class=\"headerlink\" title=\"è°ƒç”¨ä»»æ„æ–¹æ³•\"></a>è°ƒç”¨ä»»æ„æ–¹æ³•</h3><p>åœ¨ä¸Šä»£ç ä¹‹å‰ï¼Œé¦–å…ˆæˆ‘ä»¬è¦æ¸…æ¥šä¸€ä¸ªæ¦‚å¿µå…³äºMethodç±»ã€‚Methodç±»ç±»ä¼¼äºCè¯­è¨€ä¸­çš„å‡½æ•°æŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å‡½æ•°æŒ‡é’ˆæ‰§è¡Œä»»æ„å‡½æ•°ã€‚</p>\n<ul>\n<li>å‡å¦‚æˆ‘ä»¬å·²ç»è·å¾—äº†ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œé‚£ä¹ˆå¦‚ä½•å»è°ƒç”¨ç›¸å¯¹åº”çš„å‡½æ•°å‘¢ï¼Ÿè¿™æ—¶å€™ï¼Œåå°„æœºåˆ¶å°±å¯ä»¥å¸®åˆ°æˆ‘ä»¬ï¼ŒMathodç±»ä¸­æä¾›äº†ä¸€ä¸ªinvoke()æ–¹æ³•ï¼Œå®ƒä¾¿æ˜¯åˆ©ç”¨åå°„æœºåˆ¶æ¥å®ç°é€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨å¯¹åº”çš„å‡½æ•°ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ä¸‹é¢æ˜¯invoke()æ–¹æ³•ç­¾åï¼Œå®ƒå°±é•¿è¿™ä¸ªæ ·å­</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * å‚æ•°1: </span></span><br><span class=\"line\"><span class=\"comment\"> *      æ˜¯ä¸€ä¸ªéšå¼å‚æ•°ã€‚</span></span><br><span class=\"line\"><span class=\"comment\"> *      å¯¹äºé™æ€æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥è¢«å¿½ç•¥ï¼Œå³å¯ä»¥å°†å®ƒè®¾ç½®ä¸ºnull</span></span><br><span class=\"line\"><span class=\"comment\"> * å‰©ä½™å‚æ•°:</span></span><br><span class=\"line\"><span class=\"comment\"> *      æ˜¯æ˜¾ç¤ºå‚æ•°ï¼Œå¦‚æœæ²¡æœ‰æ˜¾ç¤ºå‚æ•°å°±ä¼ é€’ä¸€ä¸ªnull</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> * å¥½åƒå¾ˆéš¾ç†è§£ï¼Œæˆ‘ä»¬æ¥å¯¹ç…§ç€è·å–å‡½æ•°æŒ‡é’ˆçš„æ–¹æ³•æ¥çœ‹è°ƒç”¨å‡½æ•°æŒ‡é’ˆçš„æ–¹æ³•å°±ä¼šæ˜ç™½</span></span><br><span class=\"line\"><span class=\"comment\"> *      String s = \"1\";</span></span><br><span class=\"line\"><span class=\"comment\"> *      Method m = s.getClass().getMethod(name, parameterTypes);</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\">Object <span class=\"title\">invoke</span><span class=\"params\">(Object obj, Object... args)</span></span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•å»è°ƒç”¨å‡½æ•°æŒ‡é’ˆå¯¹åº”çš„å‡½æ•°æ–¹æ³•äº†ã€‚é‚£ä¹ˆï¼Œå¦ä¸€é—®é¢˜ï¼Ÿæˆ‘ä»¬å¦‚ä½•è·å¾—ä¸€ä¸ªé™Œç”Ÿç±»ä¸­çš„å‡½æ•°æŒ‡é’ˆå‘¢ï¼Ÿ<ol>\n<li>å¯ä»¥é€šè¿‡Classç±»ä¸­çš„getDeclareMethodsæ–¹æ³•ï¼Œåœ¨è¿”å›çš„ç»“æœå»æ‰¾ä½ æƒ³è¦çš„Method</li>\n<li>ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨è¿™ä¸ªç±»çš„getMethodæ–¹æ³•å¾—åˆ°</li>\n</ol>\n</li>\n</ul>\n<p><br></p>\n<blockquote>\n<p>  å‚è€ƒæ–‡çŒ®ï¼š<br>  [ 1 ] Javaæ ¸å¿ƒæŠ€æœ¯I p190-207<br><br></p>\n</blockquote>\n<p>ğŸ€From Clover <a href=\"https://aprilsx.github.io/2018/04/13/sprouting180413b/\">https://aprilsx.github.io/2018/04/13/sprouting180413b/</a> </p>\n","categories":[],"tags":[{"name":"sprouting","slug":"sprouting","count":17,"path":"api/tags/sprouting.json"}]}